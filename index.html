<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>BOI CRM</title>
  <link rel="icon" href="boi-logo.png" />
<link href="styles.css?v=20251230_stage_pipeline_fix2" rel="stylesheet"/>
</head>
<body>
<header class="topbar">
<div class="brand">
<img alt="BOI" class="brand__logo" src="boi-logo.png"/>
<div class="brand__text">
<div class="brand__title">BOI CRM</div>
<div class="brand__sub">Blue Orbit International LLP ‚Ä¢ Lead Capture</div>
</div>
</div>
<div class="topbar__right">
  <div class="gsearch" id="gsearchWrap">
    <div class="gsearch__input">
      <span class="gsearch__icon" aria-hidden="true">üîé</span>
      <input id="globalSearch" type="text" placeholder="Search leads‚Ä¶ (press /)" autocomplete="off" />
    </div>
    <div class="gsearch__results" id="globalSearchResults" style="display:none"></div>
  </div>
<div class="pill" id="userPill">User: ‚Äî</div>
<button class="btn btn--ghost" id="btnTradeShowMode" type="button" title="Toggle trade-show fast entry">Trade Show: Off</button>
<button class="btn btn--ghost" id="btnShareVcard" type="button" title="Show your vCard QR">My QR</button>
<button class="btn btn--ghost" id="btnSwitchUser" type="button">Switch User</button>
<button class="btn btn--ghost" id="btnSettings" type="button">Settings</button>
</div>
</header>
<main class="shell">
<nav class="tabs">
<button class="tab isActive" id="tabCapture" type="button">Capture</button>
<button class="tab" id="tabDashboard" type="button">Home</button>
<button class="tab" id="tabPipeline" type="button">Pipeline</button>
<button class="tab" id="tabInsights" type="button">Insights</button>
<button class="tab" id="tabLeads" type="button">Leads</button>
<button class="tab" id="tabCalendar" type="button">Calendar</button>
<div class="tabs__spacer"></div>
<div class="leadtype">
<span class="leadtype__label">LEAD TYPE</span>
<div class="seg">
<button class="seg__btn isActive" id="btnSupplier" type="button">Supplier</button>
<button class="seg__btn" id="btnBuyer" type="button">Buyer</button>
</div>
<span class="hint">Scan is optional ‚Ä¢ Auto-fills if QR is vCard</span>
</div>
<button class="btn btn--scan" id="btnScan" type="button">Scan QR (optional)</button>
<div class="summary" id="summary">0 leads this session</div>
</nav>
<!-- CAPTURE -->
<section class="view" id="viewCapture">
<div class="grid">
<div class="card">
<div class="card__hdr">
<div class="card__title" id="formTitle">Supplier details</div>
<div class="card__sub">Fill manually or scan. Attach catalog / card images if available.</div>
</div>
<!-- SUPPLIER FORM -->
<form class="form" id="supplierForm">
<div class="row2">
<div class="field">
<label>Company name <span class="req">*</span></label>
<input autocomplete="organization" id="supCompany" placeholder="Company" type="text"/>
</div>
<div class="field">
<label>Contact person <span class="req">*</span></label>
<input autocomplete="name" id="supContact" placeholder="Name" type="text"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Title</label>
<input id="supTitle" placeholder="Title" type="text"/>
</div>
<div class="field">
<label>Email</label>
<input autocomplete="email" id="supEmail" placeholder="name@company.com" type="email"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Country (type to search) <span class="req">*</span></label>
<div id="supCountryCombo"></div>
</div>
<div class="field">
<label>Markets (type to search)</label>
<div id="supMarketsCombo"></div>
</div>
</div>
<div class="row2">
<div class="field">
<label>Phone 1</label>
<input autocomplete="tel" id="supPhone" placeholder="+91 ‚Ä¶" type="tel"/>
</div>
<div class="field">
<label>Phone 2 (optional)</label>
<input autocomplete="tel" id="supPhone2" placeholder="+91 ‚Ä¶" type="tel"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Product Type (type to search)</label>
<div id="supProductTypeCombo"></div>
</div>
<div class="field">
<label>Private label?</label>
<select id="supPL">
<option value=""></option>
<option>Private label</option>
<option>Own brand</option>
<option>Both</option>
</select>
</div>

</div>

<div class="row2">
  <div class="field">
    <label>Supplier Stage</label>
    <select id="supStage"></select>
  </div>
  <div class="field">
    <label>Next Step</label>
    <select id="supNextStep"></select>
  </div>
</div>


<div class="row2">
  <div class="field">
    <label>Deal Value (optional)</label>
    <input id="supDealValue" type="number" inputmode="decimal" placeholder="e.g. 12000"/>
  </div>
  <div class="field">
    <label>Currency</label>
    <select id="supDealCurrency" class="currencySelect">
      <option value="USD">USD</option>
<option value="EUR">EUR</option>
<option value="GBP">GBP</option>
<option value="AED">AED</option>
<option value="INR">INR</option>
    </select>
  </div>
</div>

<div class="notesDock" id="supNotesDock">
<div class="notesDock__hdr">
<label for="supNotes">Notes</label>
<div class="notesDock__actions">
<button class="btn btn--ghost btn--sm" id="supNotesMic" title="Voice to text" type="button">üéôÔ∏è Dictate</button>
<span class="hint" id="supNotesMicStatus"></span>
</div>
</div>
<textarea id="supNotes" placeholder="Quick notes‚Ä¶" rows="3"></textarea>
</div>

<details class="accordion">
<summary class="accordion__summary">Optional details (tap to expand)</summary>
<div class="accordion__body">
<div class="row2">
<div class="field">
<label>Website</label>
<input id="supWebsite" placeholder="https://‚Ä¶" type="url"/>
</div>
<div class="field">
<label>Social</label>
<input id="supSocial" placeholder="@company" type="text"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Price ‚Äî Ex-Factory</label>
<input id="supExFactory" placeholder="USD / unit" type="text"/>
</div>
<div class="field">
<label>Price ‚Äî FOB</label>
<input id="supFOB" placeholder="USD / unit" type="text"/>
</div>
</div>
<div class="field">
<label>What do they sell? (one per line)</label>
<textarea id="supProducts" placeholder="Item 1
Item 2
Item 3" rows="4"></textarea>
</div>
<div class="field">
<label>QR raw (auto-filled if scanned)</label>
<input id="supQR" type="text"/>
</div>
</div>
</details>
<div class="row2">
<div class="field">
<label>Attach catalog / docs (optional ‚Ä¢ multiple)</label>
<input id="supCatalogFiles" multiple="" type="file"/>
</div>
<div class="field">
<label>Attach card image (optional)</label>
<input id="supCardFile" type="file"/>
</div>
</div>
<!-- FOLLOW-UP -->
<div class="follow">
<div class="follow__hdr">Schedule follow-up (IST)</div>
<div class="quickfu">
<button class="btn btn--ghost btn--sm" id="supFUQuickToday" type="button">Today @10am</button>
<button class="btn btn--ghost btn--sm" id="supFUQuick7" type="button">+7 @10am</button>
<button class="btn btn--ghost btn--sm" id="supFUQuick14" type="button">+14 @10am</button>
</div>
<div class="row2">
<div class="field">
<label>Date</label>
<input id="supFUDate" type="date"/>
</div>
<div class="field">
<label>Time</label>
<input id="supFUTime" type="time"/>
</div>
</div>
<div class="field">
<label>Follow-up note</label>
<input id="supFUNotes" placeholder="Call / WhatsApp / send catalog / pricing‚Ä¶" type="text"/>
</div>
<div class="row2">
<button class="btn btn--ghost" id="supFUQueueBtn" type="button">Add Follow-up</button>
<div class="hint" id="supFULast"></div>
</div>
</div>
<div class="btnrow">
<button class="btn btn--primary" id="saveSupplierNew" type="button">Save &amp; New</button>
<button class="btn btn--ghost" id="clearSupplier" type="button">Clear</button>
<button class="btn btn--primary" id="saveSupplierClose" type="button">Save &amp; Close</button>
</div>
<div class="result" id="supResult"></div>
</form>
<!-- BUYER FORM -->
<form class="form" id="buyerForm" style="display:none;">
<div class="row2">
<div class="field">
<label>Company <span class="req">*</span></label>
<input autocomplete="organization" id="buyCompany" placeholder="Company" type="text"/>
</div>

<div class="field">
<label>Contact person <span class="req">*</span></label>
<input autocomplete="name" id="buyContact" placeholder="Name" type="text"/>
</div>

</div>
<div class="row2">
<div class="field">
<label>Title</label>
<input id="buyTitle" placeholder="Title" type="text"/>
</div>
<div class="field">
<label>Email</label>
<input autocomplete="email" id="buyEmail" placeholder="name@company.com" type="email"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Country (type to search) <span class="req">*</span></label>
<div id="buyCountryCombo"></div>
</div>
<div class="field">
<label>Markets (type to search)</label>
<div id="buyMarketsCombo"></div>
</div>
</div>
<div class="row2">
<div class="field">
<label>Phone 1</label>
<input autocomplete="tel" id="buyPhone" placeholder="+91 ‚Ä¶" type="tel"/>
</div>
<div class="field">
<label>Phone 2 (optional)</label>
<input autocomplete="tel" id="buyPhone2" placeholder="+91 ‚Ä¶" type="tel"/>
</div>

</div>
<details class="accordion">
<summary class="accordion__summary">Optional details (tap to expand)</summary>
<div class="accordion__body">
<div class="row2">
<div class="field">
<label>Website</label>
<input id="buyWebsite" placeholder="https://‚Ä¶" type="url"/>
</div>
<div class="field">
<label>Social</label>
<input id="buySocial" placeholder="@company" type="text"/>
</div>
</div>
<div class="field">
<label>What do they want to buy? (one per line)</label>
<textarea id="buyNeeds" placeholder="Item 1
Item 2
Item 3" rows="4"></textarea>
</div>
<div class="field">
<label>QR raw (auto-filled if scanned)</label>
<input id="buyQR" type="text"/>
</div>
</div>
</details>
<div class="row2">
<div class="field">
<label>Product Type (type to search)</label>
<div id="buyProductTypeCombo"></div>
</div>
<div class="field">
<label>Private label?</label>
<select id="buyPL">
<option value=""></option>
<option>Private label</option>
<option>Own brand</option>
<option>Both</option>
</select>
</div>
</div>

<div class="row2">
  <div class="field">
    <label>Buyer Stage</label>
    <select id="buyStage"></select>
  </div>
  <div class="field">
    <label>Next Step</label>
    <select id="buyNextStep"></select>
  </div>
</div>


<div class="row2">
  <div class="field">
    <label>Deal Value (optional)</label>
    <input id="buyDealValue" type="number" inputmode="decimal" placeholder="e.g. 12000"/>
  </div>
  <div class="field">
    <label>Currency</label>
    <select id="buyDealCurrency" class="currencySelect">
      <option value="USD">USD</option>
<option value="EUR">EUR</option>
<option value="GBP">GBP</option>
<option value="AED">AED</option>
<option value="INR">INR</option>
    </select>
  </div>
</div>

<div class="notesDock" id="buyNotesDock">
<div class="notesDock__hdr">
<label for="buyNotes">Notes</label>
<div class="notesDock__actions">
<button class="btn btn--ghost btn--sm" id="buyNotesMic" title="Voice to text" type="button">üéôÔ∏è Dictate</button>
<span class="hint" id="buyNotesMicStatus"></span>
</div>
</div>
<textarea id="buyNotes" placeholder="Quick notes‚Ä¶" rows="3"></textarea>
</div>

<div class="row2">
<div class="field">
<label>Attach docs (optional ‚Ä¢ multiple)</label>
<input id="buyCatalogFiles" multiple="" type="file"/>
</div>
<div class="field">
<label>Attach card image (optional)</label>
<input id="buyCardFile" type="file"/>
</div>
</div>
<!-- FOLLOW-UP -->
<div class="follow">
<div class="follow__hdr">Schedule follow-up (IST)</div>
<div class="quickfu">
<button class="btn btn--ghost btn--sm" id="buyFUQuickToday" type="button">Today @10am</button>
<button class="btn btn--ghost btn--sm" id="buyFUQuick7" type="button">+7 @10am</button>
<button class="btn btn--ghost btn--sm" id="buyFUQuick14" type="button">+14 @10am</button>
</div>
<div class="row2">
<div class="field">
<label>Date</label>
<input id="buyFUDate" type="date"/>
</div>
<div class="field">
<label>Time</label>
<input id="buyFUTime" type="time"/>
</div>
</div>
<div class="field">
<label>Follow-up note</label>
<input id="buyFUNotes" placeholder="Call / WhatsApp / send catalog / pricing‚Ä¶" type="text"/>
</div>
<div class="row2">
<button class="btn btn--ghost" id="buyFUQueueBtn" type="button">Add Follow-up</button>
<div class="hint" id="buyFULast"></div>
</div>
</div>
<div class="btnrow">
<button class="btn btn--primary" id="saveBuyerNew" type="button">Save &amp; New</button>
<button class="btn btn--ghost" id="clearBuyer" type="button">Clear</button>
<button class="btn btn--primary" id="saveBuyerClose" type="button">Save &amp; Close</button>
</div>
<div class="result" id="buyResult"></div>
</form>
<div class="footerline">
<div class="hint" id="status">Ready</div>
</div>
</div>
<div class="card">
<div class="card__hdr">
<div class="card__title">Session leads</div>
<div class="card__sub">This device only. Master record is in Google Sheet.</div>
</div>
<table class="table" id="tbl">
<thead>
<tr><th>Type</th><th>Contact / Company</th><th>Country</th><th>Time (IST)</th></tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</section>
<!-- DASHBOARD -->
<section class="view" id="viewDashboard" style="display:none;">
<div class="card">
<div class="card__hdr">
<div class="card__title">Home</div>
<div class="card__sub">Filters apply across all leads saved in the master sheet.</div>
</div>
<div class="kpis" id="kpis"></div>
<div class="dashdrive">
<div class="dashdrive__hdr">
<div class="dashdrive__title">Drive shortcuts</div>
<div class="hint">Uploads are stored in root folders (fast save).</div>
</div>
<div class="dashdrive__btns">
<a class="btn btn--ghost" href="#" id="dashSupplierRoot" rel="noopener" target="_blank">Open Supplier Upload Folder</a>
<a class="btn btn--ghost" href="#" id="dashBuyerRoot" rel="noopener" target="_blank">Open Buyer Upload Folder</a>
<button class="btn btn--ghost" id="btnDashAttachments" type="button">Refresh Attachments</button>
</div>
<div class="dashattach">
<div class="dashattach__hdr">
<div class="dashattach__title">Today‚Äôs attachments</div>
<div class="hint" id="dashAttachHint">‚Äî</div>
<div class="dashattach__views">
<button class="btn btn--ghost btn--sm isActive" id="dashAttachViewList" type="button">List</button>
<button class="btn btn--ghost btn--sm" id="dashAttachViewGallery" type="button">Gallery</button>
</div>
</div>
<div class="dashattach__list" id="dashAttachList"></div>
<div class="dashattach__gallery" id="dashAttachGallery" style="display:none"></div>
</div>
</div>

<div class="dashrecent">
  <div class="dashrecent__hdr">
    <div class="dashrecent__title">Recent leads</div>
    <div class="hint" id="dashRecentHint">Latest entries (based on current filters)</div>
  </div>
  <div class="dashrecent__list" id="dashRecentList"></div>
</div>

</div>
</section>
<!-- LEADS -->
<section class="view" id="viewLeads" style="display:none;">
<div class="card">
<div class="card__hdr">
<div class="card__title">Leads</div>
<div class="card__sub">Call / Email / Edit saved leads</div>
</div>
<div aria-label="Leads view" class="viewtoggle" role="group">
<button class="btn btn--ghost isActive" id="btnLeadsViewCards" type="button">Cards</button>
<button class="btn btn--ghost" id="btnLeadsViewList" type="button">List</button>
</div>
<div class="filters">
<div class="field">
<label>Country</label>
<div id="leadsCountryCombo"></div>
</div>
<div class="field">
<label>Markets</label>
<div id="leadsMarketCombo"></div>
</div>
<div class="field">
<label>Product Type</label>
<div id="leadsPTCombo"></div>
</div>
<div class="field">
<label>Search (contains)</label>
<input id="leadsQ" placeholder="company, contact, email‚Ä¶" type="text"/>
</div>
<button class="btn btn--ghost" id="btnLeadsRefresh" type="button">Refresh</button>
</div>

<div class="chips" id="leadsChips">
  <div class="chips__group">
    <span class="chips__label">Captured</span>
    <button class="chip isActive" data-captured="all" type="button">All</button>
    <button class="chip" data-captured="today" type="button">Today</button>
    <button class="chip" data-captured="week" type="button">This Week</button>
    <button class="chip" data-captured="month" type="button">This Month</button>
  </div>
  <div class="chips__group">
    <span class="chips__label">Follow‚Äëup</span>
    <button class="chip isActive" data-due="all" type="button">All</button>
    <button class="chip" data-due="overdue" type="button">Overdue</button>
    <button class="chip" data-due="today" type="button">Due Today</button>
    <button class="chip" data-due="next7" type="button">Next 7 Days</button>
    <button class="chip" data-due="none" type="button">No Follow‚Äëup</button>
  </div>
</div>
<div class="pager" id="leadsPager" style="display:none">
  <button class="btn btn--ghost btn--sm" id="btnLeadsLoadMore" type="button">Load more</button>
  <div class="hint" id="leadsPagerHint"></div>
</div>

<div class="cardsGrid" id="leadsCards"></div>
<div class="tablewrap">
<table class="table" id="leadsTable">
<thead>
<tr>
<th>Time (IST)</th><th>Type</th><th>Stage</th><th>Company</th><th>Contact</th>
<th>Email</th><th>Phone</th><th>Country</th><th>Markets</th><th>Product Type</th>
<th>Entered By</th><th>Drive / Edit</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</section>

<!-- PIPELINE -->
<section class="view" id="viewPipeline" style="display:none;">
  <div class="card">
    <div class="card__hdr">
      <div class="card__title">Pipeline</div>
      <div class="card__sub">Kanban view by follow-up urgency (fast triage).</div>
    </div>
    <div class="seg" style="margin:10px 0;"><button class="seg__btn is-active" id="pipeBuyer" type="button">Buyer Pipeline</button><button class="seg__btn" id="pipeSupplier" type="button">Supplier Pipeline</button></div>
<div class="kanban" id="pipelineBoard"></div>
  </div>
</section>
<!-- INSIGHTS -->
<section class="view" id="viewInsights" style="display:none;">
  <div class="card">
    <div class="card__hdr">
      <div class="card__title">Insights</div>
      <div class="card__sub">Deep filters + table view (optional). Home stays clean.</div>
    </div>
    <div class="filters">
<div class="field">
<label>Country</label>
<div id="dashCountryCombo"></div>
</div>
<div class="field">
<label>Markets</label>
<div id="dashMarketCombo"></div>
</div>
<div class="field">
<label>Product Type</label>
<div id="dashPTCombo"></div>
</div>
<div class="field">
<label>Search (contains)</label>
<input id="dashQ" placeholder="company, contact, email‚Ä¶" type="text"/>
</div>
<button class="btn btn--ghost" id="btnDashRefresh" type="button">Refresh</button>
<button class="btn btn--ghost" id="btnDashClear" type="button">Clear Filters</button>
</div>
<div class="tablewrap">
      <table class="table dashTable" id="dashTable">
<thead>
<tr>
<th>Time (IST)</th><th>Type</th><th>Stage</th><th>Company</th><th>Contact</th>
<th>Country</th><th>Markets</th><th>Product Type</th><th>Entered By</th><th>Drive</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

  </div>
</section>

<!-- CALENDAR -->
<section class="view" id="viewCalendar" style="display:none;">
<div class="card">
<div class="card__hdr">
<div class="card__title">Follow-up Calendar</div>
<div class="card__sub">All scheduled follow-ups pulled from FollowUps tab.</div>
</div>
<div class="calbar">
<div class="seg seg--sm">
        <button class="seg__btn" id="calViewDay" data-calview="day" type="button">Day</button>
        <button class="seg__btn" id="calViewWeek" data-calview="week" type="button">Week</button>
        <button class="seg__btn isActive" id="calViewMonth" data-calview="month" type="button">Month</button>
</div>
<div class="calnav">
<button class="btn btn--ghost" id="calPrev" type="button">‚óÄ</button>
<div class="caltitle" id="calTitle">‚Äî</div>
<button class="btn btn--ghost" id="calNext" type="button">‚ñ∂</button>
</div>
<button class="btn btn--ghost" id="btnCalRefresh" type="button">Refresh</button>
</div>
<div class="calgridwrap">
<div class="calgrid" id="calGrid"></div>
<div class="calpanel">
<div class="calpanel__hdr">
<div class="calpanel__title" id="calPanelTitle">Upcoming</div>
<div class="hint" id="calPanelHint"></div>
</div>
<div class="callist" id="calList"></div>
</div>
</div>
</div>

</section>

<!-- Trade-show fast entry -->
<button class="fab fab--ts" id="btnTradeShowFab" type="button" aria-label="Trade-show fast entry" title="Trade-show fast entry">‚ö°</button>

<div aria-hidden="true" class="overlay" id="tsOverlay">
  <div class="modal modal--ts">
    <div class="modal__hdr">
      <div>
        <div class="modal__title">Trade-show fast entry</div>
        <div class="modal__sub">30-second capture ‚Ä¢ everything else editable later</div>
      </div>
      <button class="btn btn--ghost" id="btnCloseTs" type="button">Close</button>
    </div>

    <div class="ts">
      <div class="ts__bar">
        <div class="seg seg--sm">
          <button class="seg__btn isActive" id="tsTypeBuyer" type="button">Buyer</button>
          <button class="seg__btn" id="tsTypeSupplier" type="button">Supplier</button>
        </div>
        <div class="hint">Stage auto-set to <b>New</b>. Source auto-set to <b>Trade Show</b>.</div>
      </div>

      <form class="form" id="tsForm">
        <div class="field">
          <label>Quick line (paste everything)</label>
          <input id="tsQuickLine" type="text" placeholder="e.g., ABC Foods, John, +1 408..., United States" autocomplete="off" />
          <div class="hint">Tip: paste a single line from a badge/card. We will auto-fill the fields below.</div>
        </div>

        <div class="field">
          <label>Name / Company <span class="req">*</span></label>
          <input id="tsNameCompany" type="text" placeholder="e.g., John / ABC Foods" autocomplete="off" />
        </div>

        <div class="row2">
          <div class="field">
            <label>Country <span class="req">*</span></label>
            <select id="tsCountry"></select>
          </div>
          <div class="field">
            <label>Phone</label>
            <input id="tsPhone" type="tel" placeholder="Phone" autocomplete="tel" />
          </div>
        </div>

        <div class="row2">
          <div class="field">
            <label>Email</label>
            <input id="tsEmail" type="email" placeholder="Email" autocomplete="email" />
          </div>
          <div class="field">
            <label>Interest</label>
            <select id="tsInterest">
              <option value="">Select‚Ä¶</option>
              <option value="Chips">Chips</option>
              <option value="Powders">Powders</option>
              <option value="Sweeteners">Sweeteners</option>
              <option value="Private Label">Private Label</option>
              <option value="Other">Other</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label>Quick note</label>
          <input id="tsNote" type="text" placeholder="MOQ? Price? Catalog? Call later‚Ä¶" autocomplete="off" />
        </div>

        <input id="tsCardFile" type="file" accept="image/*" capture="environment" style="display:none" />

        <div class="btnrow ts__sticky">
          <button class="btn btn--primary" id="btnTsSave" type="button">Save</button>
          <button class="btn btn--ghost" id="btnTsSaveAdd" type="button">Save + Add Another</button>
        </div>

        <div class="ts__after" id="tsAfter" style="display:none">
          <div class="hint" id="tsSavedMsg"></div>
          <div class="btnrow">
            <button class="btn btn--ghost" id="btnTsAddPhoto" type="button">üì∏ Add Photo</button>
            <button class="btn btn--ghost" id="btnTsWhatsApp" type="button">üí¨ WhatsApp Intro</button>
            <button class="btn btn--primary" id="btnTsAddNext" type="button">‚ûï Add Next Lead</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>


</main>
<!-- QR overlay -->
<div aria-hidden="true" class="overlay" id="qrOverlay">
<div class="modal">
<div class="modal__hdr">
<div>
<div class="modal__title">Scan badge / business card (optional)</div>
<div class="modal__sub">Allow camera permission. Point at QR to auto-fill.</div>
</div>
<button class="btn btn--ghost" id="btnCloseQr" type="button">Close</button>
</div>
<div class="qrbox" id="qr-reader"></div>
</div>
</div>
<!-- settings overlay -->
<div aria-hidden="true" class="overlay" id="settingsOverlay">
<div class="modal">
<div class="modal__hdr">
<div>
<div class="modal__title">Settings</div>
<div class="modal__sub">Apps Script Web App URL</div>
</div>
<button class="btn btn--ghost" id="btnCloseSettings" type="button">Close</button>
</div>
<div class="form">
<div class="field">
<label>Apps Script Web App URL (ends with /exec)</label>
<input id="scriptUrlInput" type="url"/>
</div>

<div class="field">
<label>API Key (optional ‚Äî enable by setting Script Property BOI_API_KEY)</label>
<input id="apiKeyInput" type="password" autocomplete="off"/>
</div>

<button class="btn btn--primary" id="btnSaveSettings" type="button">Save</button>
<div class="hint">Tip: after updating Apps Script, deploy a new version and keep this URL updated.</div>
</div>
</div>
</div>
<!-- user overlay -->
<div aria-hidden="true" class="overlay" id="userOverlay">
<div class="modal">
<div class="modal__hdr">
<div>
<div class="modal__title">Start session</div>
<div class="modal__sub">Who is entering leads?</div>
</div>
</div>
<div class="form">
<div class="field">
<label>Select user (from Users tab)</label>
<select id="userSelect">
<option value="">Loading users‚Ä¶</option>
</select>
<div class="hint">If empty, use manual entry below.</div>
</div>
<div class="field">
<label>Or enter username manually</label>
<input id="usernameInput" type="text" placeholder="e.g., Ritesh Kapoor"/>
</div>
<button class="btn btn--primary" id="btnStartSession" type="button">Start</button>
<div class="hint">Stored locally on this device.</div>
</div>
</div>
</div>

<!-- vCard overlay -->
<div aria-hidden="true" class="overlay" id="vcardOverlay">
  <div class="modal">
    <div class="modal__hdr">
      <div>
        <div class="modal__title">My contact QR</div>
        <div class="modal__sub" id="vcardSub">Scan to add my contact (vCard)</div>
      </div>
      <button class="btn btn--ghost" id="btnCloseVcard" type="button">Close</button>
    </div>
    <div class="vcard">
      <div class="vcard__left">
        <img id="vcardLogo" class="vcard__logo" alt="Company logo" src="boi-logo.png" />
        <div class="vcard__name" id="vcardName">‚Äî</div>
        <div class="vcard__meta" id="vcardMeta">‚Äî</div>
        <div class="vcard__actions">
          <a class="btn btn--primary" id="btnDownloadVcf" download="contact.vcf" href="#">Download .VCF</a>
          <button class="btn btn--ghost" id="btnCopyVcard" type="button">Copy</button>
          <button class="btn btn--ghost" id="btnShareVcardSystem" type="button" style="display:none">Share</button>
        </div>
        <div class="hint">Tip: on iPhone/iPad camera, scanning will prompt ‚ÄúAdd contact‚Äù.</div>
      </div>
      <div class="vcard__right">
        <img id="vcardQr" alt="vCard QR" src="" />
      </div>
    </div>
  </div>
</div>
<!-- Edit lead overlay -->
<div aria-hidden="true" class="overlay" id="editOverlay">
<div class="modal">
<div class="modal__hdr">
<div>
<div class="modal__title">Edit Lead</div>
<div class="modal__sub" id="editSub">‚Äî</div>
</div>
<button class="btn btn--ghost" id="btnCloseEdit" type="button">Close</button>
</div>
<div class="form">
<input id="editLeadId" type="hidden"/>
<div class="row2">
<div class="field">
<label>Type</label>
<input disabled="" id="editType" type="text"/>
</div>
</div>
<div class="row2">
  <div class="field"><label>Stage</label><select id="editStage"></select></div>
  <div class="field"><label>Next Step</label><select id="editNextStep"></select></div>
</div>
<div class="row2">
<div class="field">
</div>
<div class="field">
<label>Entered By</label>
<input disabled="" id="editEnteredBy" type="text"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Company</label>
<input id="editCompany" type="text"/>
</div>
<div class="field">
<label>Contact</label>
<input id="editContact" type="text"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Title</label>
<input id="editTitle" type="text"/>
</div>
<div class="field">
<label>Email</label>
<input id="editEmail" type="email"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Phone</label>
<input id="editPhone" type="tel"/>
</div>
<div class="field">
<label>Phone 2</label>
<input id="editPhone2" type="tel"/>
</div>
</div>
<div class="row2">
<div class="field">
<label>Country</label>
<div id="editCountryCombo"></div>
</div>
<div class="field">
<label>Markets</label>
<div id="editMarketCombo"></div>
</div>
</div>
<div class="row2">
<div class="field">
<label>Product Type</label>
<div id="editPTCombo"></div>
</div>
<div class="field">
<label>Private label?</label>
<input id="editPL" type="text"/>
</div>
</div>
<div class="row2" id="editPriceRow">
<div class="field">
<label>Ex-Factory</label>
<input id="editExFactory" type="text"/>
</div>
<div class="field">
<label>FOB</label>
<input id="editFOB" type="text"/>
</div>
</div>

<div class="row2">
  <div class="field">
    <label>Deal Value (optional)</label>
    <input id="editDealValue" type="number" inputmode="decimal" placeholder="e.g. 12000"/>
  </div>
  <div class="field">
    <label>Currency</label>
    <select id="editDealCurrency" class="currencySelect">
      <option value="USD">USD</option>
<option value="EUR">EUR</option>
<option value="GBP">GBP</option>
<option value="AED">AED</option>
<option value="INR">INR</option>
    </select>
  </div>
</div>

<div class="field">
<label>What do they sell / buy? (one per line)</label>
<textarea id="editProducts" rows="4"></textarea>
</div>
<div class="field">
<label>Notes</label>
<textarea id="editNotes" rows="3"></textarea>

<div class="field">
  <label>Activity</label>
  <div class="activityBox">
    <div class="activityList" id="editActivityList"></div>
    <div class="row2" style="margin-top:8px;">
      <input id="editActivityNote" type="text" placeholder="Add a note (logs to timeline)"/>
      <button class="btn btn--ghost" id="btnAddActivityNote" type="button">Add</button>
    </div>
  </div>
</div>

<div class="field">
  <label>Existing Follow-ups</label>
  <div class="followList" id="editFollowUpList"></div>
</div>

</div>
<div class="follow">
<div class="follow__hdr">Add a new follow-up (optional ‚Ä¢ IST)</div>
<div class="quickfu">
<button class="btn btn--ghost btn--sm" id="editQuickToday" type="button">Today @10am</button>
<button class="btn btn--ghost btn--sm" id="editQuick7" type="button">+7 @10am</button>
<button class="btn btn--ghost btn--sm" id="editQuick14" type="button">+14 @10am</button>
</div>
<div class="row2">
<div class="field">
<label>Date</label>
<input id="editFUDate" type="date"/>
</div>
<div class="field">
<label>Time</label>
<input id="editFUTime" type="time"/>
</div>
</div>
<div class="field">
<label>Follow-up note</label>
<input id="editFUNotes" placeholder="Call / WhatsApp / send catalog / pricing‚Ä¶" type="text"/>
</div>
</div>
<div class="btnrow">
<button class="btn btn--primary" id="btnSaveEdit" type="button">Save Changes</button>
<button class="btn btn--ghost" id="btnClearEditFU" type="button">Clear Follow-up Fields</button>
</div>
<div class="hint" id="editStatus" style="padding:10px 2px 0 2px;"></div>
</div>
</div>
</div>
<!-- IMPORTANT: load QR lib only once (local vendor copy) -->
<script src="./vendor/html5-qrcode.min.js"></script>
<!-- main app -->
<script src="app.js?v=20251230_stage_pipeline_fix2"></script>
</body>
</html>
